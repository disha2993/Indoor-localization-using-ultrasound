Version 4
SHEET 1 1620 680
WIRE 464 -48 416 -48
WIRE 1024 -48 976 -48
WIRE 1408 -48 1360 -48
WIRE -240 48 -320 48
WIRE -128 48 -176 48
WIRE -16 48 -48 48
WIRE 96 48 -16 48
WIRE 160 48 96 48
WIRE 304 48 240 48
WIRE 752 64 672 64
WIRE 896 64 832 64
WIRE 96 144 96 48
WIRE 160 144 96 144
WIRE 1136 144 1136 112
WIRE 1216 144 1136 144
WIRE 304 160 304 48
WIRE 304 160 224 160
WIRE 416 160 416 -48
WIRE 416 160 368 160
WIRE 560 160 416 160
WIRE 672 160 672 64
WIRE 672 160 640 160
WIRE 704 160 672 160
WIRE 1360 160 1360 -48
WIRE 1360 160 1280 160
WIRE 160 176 96 176
WIRE 800 176 768 176
WIRE 896 176 896 64
WIRE 896 176 864 176
WIRE 976 176 976 -48
WIRE 976 176 896 176
WIRE 1024 176 976 176
WIRE 1216 176 1104 176
WIRE 704 192 672 192
WIRE 1136 192 1136 144
WIRE -816 224 -816 144
WIRE 672 288 672 192
WIRE 96 352 96 176
WIRE 96 352 -16 352
FLAG 192 192 0
FLAG 192 128 5v
FLAG -480 384 0
FLAG -480 304 5v
FLAG -16 -32 5v
FLAG -16 128 0
FLAG -320 48 IN
IOPIN -320 48 In
FLAG -816 304 0
FLAG -816 64 IN
FLAG 464 -48 FILT_OUT
IOPIN 464 -48 Out
FLAG -16 432 0
FLAG -16 272 5v
FLAG 416 240 0
FLAG 736 144 5V
FLAG 736 208 0
FLAG 672 368 0
FLAG 1024 -48 RECT_OUT
IOPIN 1024 -48 Out
FLAG 1248 128 5V
FLAG 1248 192 0
FLAG 1136 272 0
FLAG 1136 32 5V
FLAG 1408 -48 COMP_OUT
IOPIN 1408 -48 Out
SYMBOL voltage -480 288 R0
SYMATTR InstName V1
SYMATTR Value 5v
SYMBOL res 256 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 47k
SYMBOL res -32 -48 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res -32 32 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL cap -176 32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 0.1µ
SYMBOL voltage -816 48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR InstName Vsonar
SYMATTR Value SINE(0 .02 24.2k 0.0001 0 0 10)
SYMBOL cap 368 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 0.1
SYMBOL res -32 336 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -32 256 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 400 144 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL Opamps\\LTC1052 192 96 R0
SYMATTR InstName U1
SYMBOL res -32 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 656 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 848 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res 688 384 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 4,7k
SYMBOL Opamps\\LTC1052 736 112 R0
SYMATTR InstName U2
SYMBOL diode 800 192 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL Opamps\\LTC1052 1248 96 R0
SYMATTR InstName U3
SYMBOL res 1120 176 R0
SYMATTR InstName R11
SYMATTR Value 470
SYMBOL res 1120 16 R0
SYMATTR InstName R12
SYMATTR Value 47k
SYMBOL res 1120 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL voltage -816 208 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vnoise
SYMATTR Value SINE(0 .01 4k)
TEXT -384 336 Left 2 !.tran 0 500u 0
